<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>SeverMonitor</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="dist/css/adminlte.min.css">
  <!-- Google Font: Source Sans Pro -->
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">
  <!-- Custom CSS -->
  <link href="assets/css/default.css" rel="stylesheet" />
  <!--引入layui-->
  <script  src="dist/js/layui/layui.all.js"></script>
  <link rel="stylesheet" href="dist/js/layui/css/layui.css">
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">
  <!-- Navbar -->
  <nav class="main-header navbar navbar-expand bg-white navbar-light border-bottom">
    <!-- Left navbar links -->
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" data-widget="pushmenu" href="#"><i class="fa fa-bars"></i></a>
      </li>
      <li class="nav-item d-none d-sm-inline-block">
        <a href="index.html" class="nav-link">Home</a>
      </li>
    </ul>

    <!-- Right navbar links -->
    <ul class="navbar-nav ml-auto">

      <li class="nav-item">
        <a class="nav-link" onclick="logout()">
          <i class="fa fa-lg fa-sign-out"></i>
        </a>
      </li>

      <li class="nav-item">
        <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#"><i
                class="fa fa-lg fa-th-large"></i></a>
      </li>
    </ul>
  </nav>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <aside class="main-sidebar sidebar-dark-primary elevation-4" id="SideBar">
  <!-- Brand Logo -->
  <a href="index.html" class="brand-link">
    <img src="dist/img/AdminLTELogo.png" alt="AdminLTE Logo" class="brand-image img-circle elevation-3"
         style="opacity: .8">
    <span class="brand-text font-weight-light">Binary</span>
  </a>

  <!-- Sidebar -->
  <div class="sidebar">
    <!-- Sidebar user panel (optional) -->
    <div class="user-panel mt-3 pb-3 mb-3 d-flex">
      <div class="image">
        <img src="dist/img/avatar04.png" class="img-circle elevation-2" alt="User Image">
      </div>
      <div class="info">
        <a href="#" class="d-block">管理员</a>
        <a href="accountset.html" class="d-block" id="account" >账号设置</a>
      </div>
    </div>

    <!-- Sidebar Menu -->
    <nav class="mt-2">
      <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
        <!-- Add icons to the links using the .nav-icon class
             with font-awesome or any other icon font library -->
        <li  class="nav-item" >
          <a href="index.html" class="nav-link"id="index">
            <i class="fa fa-dashboard nav-icon"></i>
            <p>首页</p>
          </a>
        </li>

        <li  class="nav-item" >
          <a href="hostlist.html" class="nav-link" id="hostList">
            <i class="fa fa-server nav-icon"></i>
            <p>服务器列表</p>
          </a>
        </li>

        <li  class="nav-item" >
          <a href="imagelist.html" class="nav-link" id="imageList">
            <i class="fa fa-bullseye nav-icon"></i>
            <p>镜像管理</p>
          </a>
        </li>

        <li class="nav-item has-treeview">
          <a href="" class="nav-link" id="monitor">
            <i class="nav-icon fa fa-eye"></i>
            <p>
              <i class="right fa fa-angle-left"></i>
              服务器监控
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="basehostlist.html" class="nav-link" id="baseMonitor">
                <i class="fa fa-tag nav-icon"></i>
                <p>基础性能监控</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="prochostlist.html" class="nav-link" id="processMonitor">
                <i class="fa fa-tag nav-icon"></i>
                <p>进程监控</p>
              </a>
            </li>
          </ul>
        </li>
        <li class="nav-item has-treeview">
          <a href="" class="nav-link" id="appmonitor">
            <i class="nav-icon fa fa-cubes"></i>
            <p>
              <i class="right fa fa-angle-left"></i>
              应用服务监控
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="mysqlMonitor.html" class="nav-link" id="MysqlMonitor">
                <i class="fa fa-tag nav-icon"></i>
                <p>MySQL性能监控</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="javaMonitor.html" class="nav-link" id="javaMonitor">
                <i class="fa fa-tag nav-icon"></i>
                <p>Tomcat性能监控</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="javaThread.html" class="nav-link" id="threadMonitor">
                <i class="fa fa-tag nav-icon"></i>
                <p>JVM线程信息</p>
              </a>
            </li>
          </ul>
        </li>
        <li  class="nav-item" >
          <a href="network.html" class="nav-link" id="network">
            <i class="fa fa-rss nav-icon"></i>
            <p>网络管理</p>
          </a>
        </li>

        <li  class="nav-item" >
          <a href="storage.html" class="nav-link" id="storage">
            <i class="fa fa-database nav-icon"></i>
            <p>存储管理</p>
          </a>
        </li>
        <li  class="nav-item" >
          <a href="snap.html" class="nav-link" id="snap">
            <i class="fa fa-camera nav-icon"></i>
            <p>快照管理</p>
          </a>
        </li>
        <li  class="nav-item" >
          <a href="logmanager.html" class="nav-link" id="logImport">
            <i class="fa fa-cloud-download nav-icon"></i>
            <p>日志管理</p>
          </a>
        </li>
        <li  class="nav-item" >
          <a href="firewalllist.html" class="nav-link" id="firewalllist">
            <i class="fa fa-outdent nav-icon"></i>
            <p>防火墙</p>
          </a>
        </li>
        <li class="nav-item has-treeview">
          <a href="" class="nav-link" id="monitor1">
            <i class="nav-icon fa fa-bell"></i>
            <p>
              <i class="right fa fa-angle-left"></i>
              监控告警
            </p>
          </a>
          <ul class="nav nav-treeview">
            <li class="nav-item">
              <a href="ruleslist.html" class="nav-link" id="ruleList">
                <i class="fa fa-tag nav-icon"></i>
                <p>告警规则</p>
              </a>
            </li>
            <li class="nav-item">
              <a href="rulesRecord.html" class="nav-link" id="ruleRecord">
                <i class="fa fa-tag nav-icon"></i>
                <p>告警记录</p>
              </a>
            </li>
          </ul>
        </li>
        <li  class="nav-item" >
          <a href="webshell.html" class="nav-link" id="webshell">
            <i class="fa fa-gears nav-icon"></i>
            <p>WebShell</p>
          </a>
        </li>
      </ul>
    </nav>
    <!-- /.sidebar-menu -->
  </div>
  <!-- /.sidebar -->
  </aside>
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1>主机信息</h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="index.html">首页</a></li>
              <li class="breadcrumb-item active">主机信息</li>
            </ol>
          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>

    <!-- Main content -->
    <section class="content">
      <div class="container-fluid">
        <div class="row" id="hostquery">


        </div>

        <div id="infodetail"></div>

        <div id="hostinternet"></div>

        <div id="volum"></div>

        <!-- /.row -->
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
<!--模态窗口-->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">×
            </button>
            <h4 class="modal-title" id="myModalLabel">
            </h4>
          </div>
          <div class="modal-body" id="modal-value">

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default"
                    data-dismiss="modal">关闭
            </button>
            <button id="butt" type="button" onclick="hostCtrl()" class="btn btn-primary">

            </button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <!--模态窗口-->
    <div class="modal fade" id="myModal-reboot" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">×
            </button>
            <h4 class="modal-title" >
            </h4>
          </div>
          <div class="modal-body" >
            确定要重启吗
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default"
                    data-dismiss="modal">关闭
            </button>
            <button type="button" onclick="hostReboot()" class="btn btn-primary">
              重启
            </button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <!--模态窗口-->
    <div class="modal fade" id="myModal-creatSnap" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">×
            </button>
            <h4 class="modal-title" >
            </h4>
          </div>
          <div class="modal-body" >
            确定要创建快照吗?
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default"
                    data-dismiss="modal">关闭
            </button>
            <button type="button" onclick="hostCreatSnap()" class="btn btn-primary">
              创建
            </button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <!--模态窗口-->
    <div class="modal fade" id="myModal-creatImage" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">×
            </button>
            <h4 class="modal-title" >
            </h4>
          </div>
          <div class="modal-body" >
            <form class="form-horizontal" id="creatImage">
              <div class="card-body">
                <div class="form-group">
                  <label for="name" class="col-sm-2 control-label">名称</label>

                  <div class="col-sm-10">
                    <input type="text" class="form-control" name="name" id="name" placeholder="Name">
                  </div>
                </div>
                <div class="form-group">
                  <label for="description" class="col-sm-2 control-label">描述</label>
                  <div class="col-sm-10">
                    <input type="email" class="form-control" name="description" id="description" placeholder="Description">
                  </div>
                </div>
                <div class="form-group">
                  <label for="hostId" class="col-sm-2 control-label">主机Id</label>
                  <div class="col-sm-10">
                    <input type="email" class="form-control" name="hostId" id="hostId" placeholder="hostId" readonly>
                  </div>
                </div>

                <div class="form-group">
                  <label class="control-label" for="volumeType">后端卷类型</label>
                  <select name="volumeType" id="volumeType" class="form-control">
                    <option value="ssd">ssd</option>
                    <option value="sata">sata</option>
                  </select>
                </div>
                <div class="form-group">
                  <button type="button"  style="width: 65px;height: 37px" onclick="creatImage()" class="btn btn-primary ">提交</button>
                  <button type="button"  style="width: 65px;height: 37px"  data-dismiss="modal" class="btn btn-primary ">取消</button>
                </div>

              </div>
              <!-- /.card-body -->
              <!-- /.card-footer -->
            </form>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


    <!--模态窗口-->
    <div class="modal fade" id="myModal-changeFirewall" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"
                    aria-hidden="true">×
            </button>
            <h4 class="modal-title" >
            </h4>
          </div>
          <div class="modal-body" >
            <form class="form-horizontal" id="changeFirewall">
              <div class="card-body">
                <div class="form-group">
                  <label class="control-label" for="firewallId">防火墙Id</label>
                  <select name="firewallId" id="firewallId" class="form-control">

                  </select>
                </div>
                <div class="form-group">
                  <button type="button"  style="width: 65px;height: 37px" onclick="creatImage()" class="btn btn-primary ">提交</button>
                  <button type="button"  style="width: 65px;height: 37px"  data-dismiss="modal" class="btn btn-primary ">取消</button>
                </div>

              </div>
              <!-- /.card-body -->
              <!-- /.card-footer -->
            </form>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->



  </div>
  <!-- /.content-wrapper -->

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Control sidebar content goes here -->
  </aside>
  <!-- /.control-sidebar -->
</div>
<!-- ./wrapper -->


<!-- jQuery -->
<script src="plugins/jquery/jquery.min.js"></script>
<!-- Bootstrap 4 -->
<script src="plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- FastClick -->
<script src="plugins/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="dist/js/demo.js"></script>
<script>
  test();
  var hostid;
  var hoststatus;
  function test() {
      var url = location.search;
      console.log(url);
      if (url.indexOf("?") != -1) {
          hostid = url.substr(1);
      }
  }
  getHostDetail();
  function getHostDetail() {
      $.ajax({
          url:"/host/query/detail",
          type:"post",
          data:{"hostid":hostid},
          async:false,
          dataType:"json",
          success:function (hostquerydetail){
              console.log(hostquerydetail);
              console.log(hostquerydetail.length);
              hoststatus = hostquerydetail.statusnum;
              volumset = hostquerydetail.diskList;
              var div5 = $("#butt");
              var div4 = $("#modal-value");
              var div3 = $("#volum");
              var div2 = $("#hostinternet");
              var div1 = $("#infodetail");
              var div = $("#hostquery");
              div.append(
                 '<div class="col-md-4">\n' +
                  '            <!-- Info Boxes Style 2 -->\n' +
                  '            <div class="info-box mb-3 bg-warning">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-heartbeat" aria-hidden="true"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">CPU名称</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.cpuname +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-success">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-bars"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">CPU版本</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.cpuversion +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-danger">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-tasks"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">CPU核心</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.cpucores +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-info">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-line-chart"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">CPU主频</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.cpumainfreq +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '\n' +
                  '          </div>\n' +
                  '\n' +
                  '          <div class="col-md-4">\n' +
                  '            <!-- Info Boxes Style 2 -->\n' +
                  '            <div class="info-box mb-3 bg-warning">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-battery-full"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">内存</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.memory +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-success">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-heart-o"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">磁盘Id</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.volumeid +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-danger">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-plus-circle"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">磁盘名称</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.volumename +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-info">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-comment-o"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">磁盘类型 </span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.volumetype +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '\n' +
                  '          </div>\n' +
                  '\n' +
                  '          <div class="col-md-4">\n' +
                  '            <!-- Info Boxes Style 2 -->\n' +
                  '            <div class="info-box mb-3 bg-warning">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-database"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">磁盘容量</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.volumesize +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-success">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-pie-chart"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">磁盘已使用空间</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.volumeused +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-danger">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-hourglass"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">磁盘到期时间</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.volumeduetime +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '            <!-- /.info-box -->\n' +
                  '            <div class="info-box mb-3 bg-info">\n' +
                  '              <span class="info-box-icon"><i class="fa fa-plug"></i></span>\n' +
                  '\n' +
                  '              <div class="info-box-content">\n' +
                  '                <span class="info-box-text">磁盘状态</span>\n' +
                  '                <span class="info-box-number">'+ hostquerydetail.volumestatus +'</span>\n' +
                  '              </div>\n' +
                  '              <!-- /.info-box-content -->\n' +
                  '            </div>\n' +
                  '\n' +
                  '          </div>'
              );
              div1.append(
                  '<div id="infodetail">' +
                  '<div class="h3-title">' +
                  '基本信息' +
                  '</div>' +
                  '<div class="inner_content-box" >' +
                  '<table class="table-box">' +
                  '<tbody>' +
                  '<tr class="tr-first">' +
                  '<td class="tdRight">ID：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.id +'</td>' +
                  '<td class="tdRight">名称：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.name +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">产品状态：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.productstatus +'</td>' +
                  '<td class="tdRight">付费类型：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.paytype +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">运行状态：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.status + '  ' +
                  '<div class="btn-group">\n' +
                  '  <button style="width: 85px" type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n' +
                  '     操作 <span class="caret"></span>\n' +
                  '  </button>\n' +
                  '  <ul style="min-width: 100%" class="dropdown-menu">\n' +
                  ' <button type="button" data-toggle="modal" data-target="#myModal-reboot" class="btn btn-sm btn-block btn-primary float-left">重启</button>' +
                  ' <button type="button" data-toggle="modal" data-target="#myModal" class="btn btn-sm btn-block btn-primary float-left">'+ hostquerydetail.statuse +'</button>' +
                  ' <button type="button" data-toggle="modal" data-target="#myModal-creatSnap" class="btn btn-sm btn-block btn-primary float-left">创建快照</button>' +
                  ' <button type="button" data-toggle="modal" data-target="#myModal-creatImage" class="btn btn-sm btn-block btn-primary float-left">创建镜像</button>' +
                  '  </ul>\n' +
                  '</div>' +
                  '</td>' +
                  '<td class="tdRight">创建时间：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.creattime +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">到期时间：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.duetime +'</td>' +
                  '<td class="tdRight">host：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.host +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">防火墙名称：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.pubnetfirewallname +
                  '  <button type="button" onclick="changeFirewall()" class="btn btn-primary btn-sm " >变更</button>' +
                  '</td>' +
                  '<td class="tdRight">系统名称：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.imageName +'</td>' +
                  '</tr>' +
                  '</tbody>' +
                  '</table>' +
                  '</div>' +
                  '</div>'
              );
              div2.append(
                  '<div class="h3-title">' +
                  '网络信息' +
                  '</div>' +
                  '<div class="inner_content-box">' +
                  '<table class="table-box">' +
                  '<tbody>' +
                  '<tr class="tr-first">' +
                  '<td class="tdRight">内网id：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.prinetid +'</td>' +
                  '<td class="tdRight">公网id：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.pubnetid +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">内网ip：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.prinetip +'</td>' +
                  '<td class="tdRight">公网ip：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.pubnetip +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">内网带宽：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.prinetbandwidth +'</td>' +
                  '<td class="tdRight">公网带宽：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.pubnetbandwidth +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">私有网络名称：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.prinetname +'</td>' +
                  '<td class="tdRight">公网状态：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.pubnetprotype +'</td>' +
                  '</tr>' +
                  '<tr>' +
                  '<td class="tdRight">主机状态：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.prinetipstatus +'</td>' +
                  '<td class="tdRight">公网ip到期时间：</td>' +
                  '<td class="tdLeft">'+ hostquerydetail.pubnetduetime +'</td>' +
                  '</tr>' +
                  '</tbody>' +
                  '</table>' +
                  '</div>'
              );
              for (var j = 0;j<volumset.length;j++){
                  div3.append(
                      '<div class="h3-title">' +
                      '挂载磁盘' +
                      '</div>' +
                      '<div class="inner_content-box">' +
                      '<table class="table-box">' +
                      '<tbody>' +
                      '<tr class="tr-first">' +
                      '<td class="tdRight">创建时间：</td>' +
                      '<td class="tdLeft">'+ volumset[j].creattime +'</td>' +
                      '<td class="tdRight">到期时间：</td>' +
                      '<td class="tdLeft">'+ volumset[j].duetime +'</td>' +
                      '</tr>' +
                      '<tr>' +
                      '<td class="tdRight">磁盘id：</td>' +
                      '<td class="tdLeft">'+ volumset[j].id +'</td>' +
                      '<td class="tdRight">公网ip：</td>' +
                      '<td class="tdLeft">'+ volumset[j].name +'</td>' +
                      '</tr>' +
                      '<tr>' +
                      '<td class="tdRight">支付类型：</td>' +
                      '<td class="tdLeft">'+ volumset[j].paytype +'</td>' +
                      '<td class="tdRight">产品状态：</td>' +
                      '<td class="tdLeft">'+ volumset[j].productstatus +'</td>' +
                      '</tr>' +
                      '<tr>' +
                      '<td class="tdRight">磁盘大小：</td>' +
                      '<td class="tdLeft">'+ volumset[j].size +'GB</td>' +
                      '<td class="tdRight">磁盘类型：</td>' +
                      '<td class="tdLeft">'+ volumset[j].type +'</td>' +
                      '</tr>' +
                      '<tr>' +
                      '<td class="tdRight">uuid：</td>' +
                      '<td class="tdLeft">'+ volumset[j].uuid +'</td>' +
                      '<td class="tdRight"></td>' +
                      '<td class="tdLeft"></td>' +
                      '</tr>' +
                      '</tbody>' +
                      '</table>' +
                      '</div>'
                  )
              }
              if (hoststatus == 0) {
                  div4.append('确定要关机吗?');
                  div5.append('关机');
              }
              else if(hoststatus == 1){
                  div4.append('确定要开机吗?');
                  div5.append('开机');
              }
              document.getElementById('hostId').value = hostid;


          }
      });

  }

  function hostCtrl(){
              if (0 == hoststatus){
                  $.ajax({
                      url:"/host/shutdown",
                      type:"post",
                      data:{"hostid":hostid,},
                      async:false,
                      dataType:"text",
                      success:function (shutdown){
                          console.log(shutdown);
                          layer.msg(shutdown, {
                              time: 20000, //20s后自动关闭
                              btn: ['确定'],
                              yes:function () {
                                  window.location.reload();
                              }
                          });
                      },
                      error:function(jqXHR) {
                          layer.msg('发生错误' + jqXHR.status, {
                              time: 20000, //20s后自动关闭
                              btn: ['明白了']
                          });
                      }
                  });
              }
              else {
                  $.ajax({
                      url:"/host/startup",
                      type:"post",
                      data:{"hostid":hostid},
                      async:false,
                      dataType:"text",
                      success:function (start){
                          layer.msg(start, {
                              time: 20000, //20s后自动关闭
                              btn: ['确定'],
                              yes:function () {
                                  window.location.reload();
                              }
                          });
                      }
                  });
              }
  }
  function hostReboot() {

      $.ajax({
          url:"/host/reboot",
          type:"post",
          data:{"hostid":hostid,},
          async:false,
          dataType:"text",
          success:function (shutdown){
              layer.msg(shutdown, {
                  time: 20000, //20s后自动关闭
                  btn: ['确定'],
                  yes:function () {
                      window.location.reload();
                  }
              });
          },
          error:function(jqXHR) {
              layer.msg('发生错误' + jqXHR.status, {
                  time: 20000, //20s后自动关闭
                  btn: ['明白了']
              });
          }
      });

  }


  function hostCreatSnap() {
      loading = layer.load(1, {
          shade: [0.1, '#fff'] //0.1透明度的白色背景
      });
      $.ajax({
          url:"/host/creatSnap",
          type:"post",
          data:{"hostId":hostid,},
          async:false,
          dataType:"text",
          success:function (shutdown){
              layer.closeAll('loading');
              layer.msg(shutdown, {
                  time: 20000, //20s后自动关闭
                  btn: ['确定'],
                  yes:function () {
                      window.location.reload();
                  }
              });
          },
          error:function(jqXHR) {
              layer.closeAll('loading');
              layer.msg('发生错误' + jqXHR.status, {
                  time: 20000, //20s后自动关闭
                  btn: ['明白了']
              });
          }
      });

  }

  function creatImage() {
      $.ajax({
          //几个参数需要注意一下
          type: "POST",//方法类型
          dataType: "json",//预期服务器返回的数据类型
          url: "/image/creat",//url
          data: $('#creatImage').serialize(),
          dataType: "text",
          success: function (data) {
              layer.msg(data, {
                  time: 20000, //20s后自动关闭
                  btn: ['确定'],
                  yes:function () {
                      window.location.reload();
                  }
              });
          }
      });

  }

</script>

<script>
  getFirewallId();
  function getFirewallId() {
      var select = $("#firewallId");
      $.ajax({
          url: "/getFirewallId",
          type: "post",
          dataType: "json",
          success:function (data) {
              console.log(data);
              for (var i = 0;i <data.length;i ++){
                  select.append(
                      '<option value="'+ data[i] +'">'+ data[i] +'</option>'
                  );
              }
          }
      });
  }
  
  function changeFirewall() {
      $("#myModal-changeFirewall").modal('show');
  }

</script>


<script>
    noticeEveryFive();
    $(document).ready(function () {
        setInterval("noticeEveryFive()",1000*60*5);
    });

    function noticeEveryFive() {
        $.ajax({
            url: "/warn/notice",
            type: "post",
            dataType: "json",
            success:function (data) {
                console.log(data);
                if (data.status == "warn"){
                    layer.msg(data.reason, {
                        icon: 3,
                        time: 20000, //20s后自动关闭
                        btn: ['WebShell','取消'],
                        yes: function () {
                            window.location.href = 'webshell.html';
                        },
                        btn2:function () {
                            layer.close();
                        },
                    });
                }
            }
        });
    }

</script>

<script>
    function logout() {
        $.ajax({
            url: "/logout",
            type: "post",
            dataType: "text",
            success:function (data) {
                layer.msg(data);
                setTimeout(function () {
                    window.location.href='login.html';
                },1500);
            }
        });
    }
</script>


</body>
</html>
